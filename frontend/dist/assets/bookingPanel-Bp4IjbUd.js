import{f as y,b as k,u as S,r as s,R as L,j as e}from"./index-DZW2IOEh.js";import{T,U as C}from"./user-nav-UJag4PXf.js";import{I as D}from"./input-88kJyLvv.js";import{L as u}from"./dropdown-menu-Qxyimtk2.js";import{f as B}from"./index-RrVpSNeA.js";import{C as I}from"./customDialog-dtB0jjDb.js";import{C as f}from"./customTooltip-CM7SmVdG.js";import{I as R}from"./IconLayoutDashboard-LBGPYZUB.js";import"./commonFn-D6AOWzB5.js";import"./index-BrotWGZe.js";import"./index-Buxa1mOX.js";import"./index-D6bVBiHi.js";import"./index-DnILlKh2.js";import"./index-BRe-duKX.js";import"./index-ochMHOz7.js";import"./dialog-DsMCMXcY.js";import"./tooltip-DROGGXKL.js";const A=()=>{const r=y(),{isLoggedIn:c}=k(),{HandleGetRequest:o}=S(),[a,h]=s.useState({bookingList:!0}),[m,g]=s.useState("ascending"),[t,d]=s.useState(""),[i,b]=s.useState([]),[j,N]=s.useState([]);s.useLayoutEffect(()=>{c||r("../auth/sign-in")},[c]),s.useEffect(()=>{a.bookingList&&w(L.publicCommonServiceBooking,"bookingList")},[a.bookingList]),s.useEffect(()=>{if((i==null?void 0:i.length)>0){let l=i.sort((x,n)=>{var p;return m==="ascending"?(p=x.clientName)==null?void 0:p.localeCompare(n.clientName):n.clientName.localeCompare(x.clientName)});t!==""&&(l=l.filter(x=>x.id.toLowerCase().includes(t.toLowerCase()))),s.startTransition(()=>{N(l)})}},[m,t,i]);async function w(l,x){const n=await o({route:l});(n==null?void 0:n.status)===200&&s.startTransition(()=>{h(p=>({...p,[x]:!1})),b(n.data)})}function v(){s.startTransition(()=>{h(l=>({...l,bookingList:!0}))})}return{selectedSort:m,setSelectedSort:g,searchTerm:t,setSearchTerm:d,filteredList:j,handleConfirmation:v}},E=({list:r})=>{const[c,o]=s.useState(!1),[a,h]=s.useState({});function m(t){s.startTransition(()=>{h(t),o(!0)})}const g=()=>{var t,d;return e.jsxs("div",{className:"rounded bg-slate-300 p-3",children:[e.jsx("div",{className:"text-2xl font-semibold",children:a.serviceName}),((t=a==null?void 0:a.addonList)==null?void 0:t.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t-2 border-b-2 my-2",children:"Addon List"}),e.jsx("div",{className:"flex gap-2 flex-col",children:(d=a==null?void 0:a.addonList)==null?void 0:d.map(i=>e.jsx("b",{children:i.addonName},i.addonID))})]})]})};return e.jsxs("div",{className:"overflow-x-auto overscroll-y-none",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 rounded-s py-3 text-left font-bold text-xs text-white bg-black uppercase tracking-wider md:px-6",children:"S.No."}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Appointment ID"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Appintment Date & Time"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-center bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Booked Service"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Total Amount"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Message"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Status"})}),e.jsx("th",{className:"px-2 rounded-e py-3 text-left font-bold text-xs text-white bg-black uppercase tracking-wider md:px-6",children:"Interact"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r==null?void 0:r.map((t,d)=>e.jsxs("tr",{className:"bg-gray-50 text-gray-900 hover:bg-gray-100",children:[e.jsxs("td",{className:"py-4 text-center relative",children:[t.isRescheduled&&e.jsx("div",{className:"absolute top-0 left-0 rounded-r-sm px-3 text-sm font-semibold bg-red-300 text-red-600",children:"Rescheduled"}),d+1]}),e.jsx("td",{className:"py-4",children:t.id}),e.jsxs("td",{className:"py-4 text-center",children:[new Date(t.appointmentDate).toLocaleDateString("en-GB")," ",e.jsx("br",{}),new Date(`1970-01-01T${t.appointmentTime}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})]}),e.jsx("td",{className:"py-4 text-center",children:t.serviceName}),e.jsxs("td",{className:"py-4 text-center",children:["â‚¹ ",t.totalAmount,"/-"]}),e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"text-center w-28 truncate",children:e.jsx(f,{content:t.message,trigger:e.jsx("div",{className:"w-[100%] truncate",children:t.message})})})}),e.jsx("td",{className:"py-4 text-center",children:t.status}),e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"flex justify-center gap-2",children:e.jsx(f,{content:"View Booked Services",trigger:e.jsx(R,{className:"cursor-pointer rounded-md border p-1 bg-slate-400 hover:bg-slate-600 transition-all fade-in-100 text-black hover:text-white",size:"25",onClick:()=>m(t)})})})})]},t.id))})]}),e.jsx(I,{isOpen:c,setISOpen:o,hasTrigger:!1,title:"Booking Details",customWidth:"20vw",contentNode:e.jsx(g,{})})]})},Z=()=>{const{filteredList:r,setSearchTerm:c,searchTerm:o}=A();return e.jsxs(u,{fixed:!0,children:[e.jsx(u.Header,{children:e.jsxs("div",{className:"flex w-full items-center justify-end space-x-4",children:[e.jsx(T,{}),e.jsx(C,{})]})}),e.jsxs(u.Body,{className:"flex flex-col",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Booking List"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage all your bookings at one place."})]}),e.jsx("div",{className:"my-4 flex items-end justify-between sm:my-0 sm:items-center",children:e.jsx("div",{className:"w-full flex flex-col gap-4 sm:my-4 sm:flex-row",children:e.jsx(D,{placeholder:"Filter services...",className:"h-9 w-full sm:w-40 sm:w-[250px]",value:o,onChange:a=>c(a.target.value)})})}),e.jsx(B,{className:"shadow"}),e.jsx(E,{list:r})]})]})};export{Z as default};
