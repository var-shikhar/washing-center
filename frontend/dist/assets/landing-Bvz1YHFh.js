import{j as e,B as N,P as z,C as A,u as G,r,t as D,R as H,L as M}from"./index-DkidKY7D.js";import{B,I as F}from"./badge-DVlAPO8w.js";import{P as $,a as K,b as O,C as V,c as q,d as U,e as J,f as _}from"./popover-e0Acqzn0.js";import{S as Q,a as W,b as X,c as Y,d as Z,e as ee}from"./select-dqCVHQmV.js";import{c as se}from"./commonFn-D_Qiadkl.js";import{I as ae}from"./IconListDetails-0u77UOGG.js";import{F as te}from"./footer-BXAsYmqA.js";import{H as ne}from"./header-knHS7wzp.js";import{J as le}from"./joinNowCTA-BehLIW-z.js";import"./index-C0CCeTT2.js";import"./index-DPfxzuVq.js";import"./dialog-D3xTQXaE.js";import"./index-oe18SB1a.js";import"./index-BAGnQKRI.js";import"./index-stKcZIEz.js";import"./index-BlF_HEDA.js";import"./theme-switch-CmwJWacc.js";import"./dropdown-menu-CKjr6Fii.js";import"./index-sqcCN2LW.js";function S({title:f,options:x,optionIDSlug:o,optionNameSlug:c,selectedValues:i,onChange:m,type:g}){return e.jsxs($,{children:[e.jsx(K,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),f,i.size>0&&e.jsxs(B,{variant:"secondary",className:"ml-2",children:[i.size," selected"]})]})}),e.jsx(O,{className:"w-[200px] p-0",align:"start",children:e.jsx(V,{children:e.jsxs(q,{children:[e.jsx(U,{children:"No results found."}),e.jsx(J,{children:x==null?void 0:x.map(t=>{const v=i.size>0?i==null?void 0:i.has(t[o]):!1;return e.jsxs(_,{onSelect:()=>{m(g,t[o])},children:[e.jsx("div",{className:`mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary ${v?"bg-primary text-primary-foreground":"opacity-50"}`,children:v&&e.jsx(A,{className:"h-4 w-4"})}),e.jsx("span",{children:t[c]})]},t[o])})})]})})})]})}const{handleGMapURL:re,getCalculateDistance:ie}=se,T=[{value:0,label:"All Centers"},{value:1,label:"1 Kms"},{value:2,label:"2 Kms"},{value:5,label:"5 Kms"},{value:10,label:"10 Kms"},{value:20,label:"20 Kms"},{value:50,label:"50 Kms"}],oe=()=>{const{HandleGetRequest:f}=G(),[x,o]=r.useState(!0),[c,i]=r.useState({}),[m,g]=r.useState([]),[t,v]=r.useState({vehicleType:new Set,category:new Set,service:new Set}),[p,s]=r.useState({lat:0,long:0,radius:T[0].value.toString()});r.useLayoutEffect(()=>{d()},[]);async function d(){(await navigator.permissions.query({name:"geolocation"})).state==="denied"?(console.log("Location access was denied. Please enable it."),L()):y()}function y(){navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>P(a),a=>E(a)):console.error("Geolocation is not supported by this browser.")}function P(a){const{latitude:n,longitude:u}=a.coords;r.startTransition(()=>{s(h=>({...h,lat:n,long:u}))})}function E(a){switch(a.code){case a.PERMISSION_DENIED:L();break;case a.TIMEOUT:case a.POSITION_UNAVAILABLE:default:D({title:"Error",description:"Something went wrong, Try later!"});break}}function L(){D({title:"Error",description:"Location access is required. Please enable it in your browser settings."})}r.useEffect(()=>{x&&R(`${H.publicCenterListRoute}/${p.lat}/${p.long}/${p.radius}`)},[x]),r.useEffect(()=>{if(Array.isArray(c.centerList)){let a=c.centerList;(t.vehicleType.size>0||t.category.size>0||t.service.size>0)&&(a=a.filter(n=>{const u=n.services||[],h=t.vehicleType.size===0||u.some(l=>l&&t.vehicleType.has(l.vehicleID)),b=t.category.size===0||u.some(l=>l&&t.category.has(l==null?void 0:l.categoryID)),j=t.service.size===0||u.some(l=>l&&(t.service.has(l.serviceID)||l.addons&&l.addons.some(w=>t.service.has(w.serviceID))));return h&&b&&j})),r.startTransition(()=>{g(a)})}},[c,t]);async function R(a){const n=await f({route:a});if((n==null?void 0:n.status)===200){const{vehicleList:u,categoryList:h,serviceList:b,centerList:j}=n.data,l=(j==null?void 0:j.length)>0?j.map(w=>{var C,I;const k=ie(p.lat,p.long,((C=w.centerGeoLocation)==null?void 0:C.lat)||0,((I=w.centerGeoLocation)==null?void 0:I.long)||0);return{...w,distance:k}}):[];r.startTransition(()=>{o(!1),i({categoryList:h,centerList:l,serviceList:b,vehicleList:u})})}}return{radiusCircle:T,centerList:c,filteredList:m,selectedValues:t,defaultData:p,handleSelectionChange:(a,n)=>{v(u=>{const h=new Set(u[a]);return h.has(n)?h.delete(n):h.add(n),{...u,[a]:h}})},handleRadiusCircle:a=>{r.startTransition(()=>{o(!0),s(n=>({...n,radius:a}))})},handleGMapURL:re}},ce=()=>{const[f,x]=r.useState(null),{radiusCircle:o,defaultData:c,centerList:i,filteredList:m,selectedValues:g,handleSelectionChange:t,handleRadiusCircle:v,handleGMapURL:p}=oe();return e.jsx(e.Fragment,{children:e.jsx("section",{className:"relative my-8",children:e.jsxs("div",{className:"container mx-auto flex flex-col px-4 gap-5 sm:gap-14 items-center",children:[e.jsxs("div",{className:"flex gap-2 justify-center flex-wrap w-full sm:justify-end",children:[e.jsx(S,{title:"Vehicle Type",type:"vehicleType",selectedValues:g.vehicleType,options:i.vehicleList,optionIDSlug:"id",optionNameSlug:"name",onChange:(s,d)=>{t(s,d)}}),e.jsx(S,{title:"Category",type:"category",selectedValues:g.category,options:i.categoryList,optionIDSlug:"id",optionNameSlug:"name",onChange:(s,d)=>{t(s,d)}}),e.jsx(S,{title:"Service Type",type:"service",selectedValues:g.service,options:i.serviceList,optionIDSlug:"id",optionNameSlug:"name",onChange:(s,d)=>{t(s,d)}}),c.lat!==0&&c.long!==0&&e.jsxs(Q,{value:c.radius,onValueChange:s=>v(s),children:[e.jsx(W,{className:"w-auto",children:e.jsx(X,{placeholder:"Select Radius"})}),e.jsx(Y,{children:e.jsx(Z,{children:o==null?void 0:o.map(s=>e.jsx(ee,{value:s.value.toString(),children:s.label},s.value))})})]})]}),e.jsx("div",{className:"mx-2 w-full",children:e.jsx("div",{className:"flex flex-wrap w-[90vw] sm:w-full mx-auto",children:(m==null?void 0:m.length)>0&&m.map(s=>e.jsx("div",{className:`relative w-full md:w-1/2 lg:w-1/3 p-2 transition-all delay-200 ${f!==null&&f!==s.centerID?"blur-sm":""}`,onMouseEnter:()=>x(s.centerID),onMouseLeave:()=>x(null),children:e.jsxs("div",{className:"rounded-lg border p-4 hover:shadow-2xl hover:scale-105 transition-all delay-100 flex flex-col gap-2",children:[e.jsxs("div",{className:"my-2 mt-3 flex items-center gap-2 w-full",children:[e.jsx("div",{className:"flex size-10 items-center justify-center rounded-lg bg-[--muted] p-2 font-bold",children:s==null?void 0:s.centerAbbreviation}),e.jsx("h2",{className:"mb-1 font-semibold text-xl truncate",children:s==null?void 0:s.centerName})]}),e.jsxs("p",{className:"line-clamp-2",children:[e.jsx("span",{className:"text-[--muted-foreground]",children:"Phone:"})," ",s==null?void 0:s.centerPhone]}),e.jsxs("p",{className:"line-clamp-2",children:[e.jsx("span",{className:"text-[--muted-foreground]",children:"Distance:"})," ",Number(s==null?void 0:s.distance).toFixed(3)," km"]}),e.jsx("small",{className:"line-clamp-2 text-[--muted-foreground] overflow-hidden text-ellipsis whitespace-normal",style:{minHeight:"calc(2 * 1.2rem)"},children:s==null?void 0:s.centerAddress}),e.jsxs("div",{className:"flex gap-2 justify-between",children:[e.jsx(M,{to:`../center/${s.centerID}`,children:e.jsxs(N,{type:"button",className:"flex gap-2 items-center",children:[e.jsx(ae,{size:15}),"View Services"]})}),e.jsxs(N,{type:"button",className:"flex gap-2 items-center",variant:"success",onClick:()=>{var d,y;return p(((d=s==null?void 0:s.centerGeoLocation)==null?void 0:d.lat)||0,((y=s==null?void 0:s.centerGeoLocation)==null?void 0:y.long)||0)},children:[e.jsx(F,{size:15}),"View Direction"]})]})]})},s.centerID))})})]})})})},Ee=()=>e.jsxs(e.Fragment,{children:[e.jsx(ne,{activeHeader:"Home"}),e.jsxs("section",{className:"bg-[--deep-purple] py-24 pt-36 relative",children:[e.jsx("div",{className:"container",children:e.jsx("div",{className:"border-0 text-white text-4xl text-center",children:"Book your next Car/Bike Washing Service Online"})}),e.jsx("div",{className:"header absolute bottom-[-2rem] w-full",children:e.jsx("div",{children:e.jsxs("svg",{className:"waves",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 24 150 28",preserveAspectRatio:"none",shapeRendering:"auto",children:[e.jsx("defs",{children:e.jsx("path",{id:"gentle-wave",d:"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"})}),e.jsxs("g",{className:"parallax",children:[e.jsx("use",{xlinkHref:"#gentle-wave",x:"48",y:"0",fill:"rgba(255,255,255,0.7"}),e.jsx("use",{xlinkHref:"#gentle-wave",x:"48",y:"3",fill:"rgba(255,255,255,0.5)"}),e.jsx("use",{xlinkHref:"#gentle-wave",x:"48",y:"5",fill:"rgba(255,255,255,0.3)"}),e.jsx("use",{xlinkHref:"#gentle-wave",x:"48",y:"7",fill:"#fff"})]})]})})})]}),e.jsx(ce,{}),e.jsx(le,{}),e.jsx(te,{})]});export{Ee as default};
