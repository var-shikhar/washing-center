import{g as y,d as k,u as S,r as s,R as L,j as e}from"./index-DkidKY7D.js";import{T}from"./theme-switch-CmwJWacc.js";import{I as D}from"./input-ET1Ogpp1.js";import{U as B}from"./user-nav-Bu-GyEHD.js";import{L as g}from"./layout-C7enXjvf.js";import{f as C}from"./index-BAGnQKRI.js";import{C as u,a as I}from"./customTooltip-BnMzOCLi.js";import{I as R}from"./IconLayoutDashboard-DEzlZwW-.js";import"./dropdown-menu-CKjr6Fii.js";import"./index-stKcZIEz.js";import"./index-C0CCeTT2.js";import"./index-DPfxzuVq.js";import"./index-sqcCN2LW.js";import"./index-oe18SB1a.js";import"./commonFn-D_Qiadkl.js";import"./index-BlF_HEDA.js";import"./dialog-D3xTQXaE.js";import"./tooltip-fcW14P49.js";const A=()=>{const r=y(),{isLoggedIn:l}=k(),{HandleGetRequest:c}=S(),[a,d]=s.useState({bookingList:!0}),[x,h]=s.useState("ascending"),[t,o]=s.useState(""),[i,f]=s.useState([]),[b,j]=s.useState([]);s.useLayoutEffect(()=>{l||r("../auth/sign-in")},[l]),s.useEffect(()=>{a.bookingList&&N(L.publicCommonServiceBooking,"bookingList")},[a.bookingList]),s.useEffect(()=>{if((i==null?void 0:i.length)>0){let n=i;t!==""&&(n=n.filter(p=>p.id.toLowerCase().includes(t.toLowerCase()))),s.startTransition(()=>{j(n)})}},[x,t,i]);async function N(n,p){const m=await c({route:n});(m==null?void 0:m.status)===200&&s.startTransition(()=>{d(v=>({...v,[p]:!1})),f(m.data)})}function w(){s.startTransition(()=>{d(n=>({...n,bookingList:!0}))})}return{selectedSort:x,setSelectedSort:h,searchTerm:t,setSearchTerm:o,filteredList:b,handleConfirmation:w}},E=({list:r})=>{const[l,c]=s.useState(!1),[a,d]=s.useState({});function x(t){s.startTransition(()=>{d(t),c(!0)})}const h=()=>{var t,o;return e.jsxs("div",{className:"rounded bg-slate-300 p-3",children:[e.jsx("div",{className:"text-2xl font-semibold",children:a.serviceName}),((t=a==null?void 0:a.addonList)==null?void 0:t.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t-2 border-b-2 my-2",children:"Addon List"}),e.jsx("div",{className:"flex gap-2 flex-col",children:(o=a==null?void 0:a.addonList)==null?void 0:o.map(i=>e.jsx("b",{children:i.addonName},i.addonID))})]})]})};return e.jsxs("div",{className:"overflow-x-auto overscroll-y-none",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 rounded-s py-3 text-left font-bold text-xs text-white bg-black uppercase tracking-wider md:px-6",children:"S.No."}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Appointment ID"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Appintment Date & Time"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-center bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Booked Service"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Total Amount"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Message"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Status"})}),e.jsx("th",{className:"px-2 rounded-e py-3 text-left font-bold text-xs text-white bg-black uppercase tracking-wider md:px-6",children:"Interact"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r==null?void 0:r.map((t,o)=>e.jsxs("tr",{className:"bg-gray-50 text-gray-900 hover:bg-gray-100",children:[e.jsxs("td",{className:"py-4 text-center relative",children:[t.isRescheduled&&e.jsx("div",{className:"absolute top-0 left-0 rounded-r-sm px-3 text-sm font-semibold bg-red-300 text-red-600",children:"Rescheduled"}),o+1]}),e.jsx("td",{className:"py-4",children:t.id}),e.jsxs("td",{className:"py-4 text-center",children:[new Date(t.appointmentDate).toLocaleDateString("en-GB")," ",e.jsx("br",{}),new Date(`1970-01-01T${t.appointmentTime}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})]}),e.jsx("td",{className:"py-4 text-center",children:t.serviceName}),e.jsxs("td",{className:"py-4 text-center",children:["â‚¹ ",t.totalAmount,"/-"]}),e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"text-center w-28 truncate",children:e.jsx(u,{content:t.message,trigger:e.jsx("div",{className:"w-[100%] truncate",children:t.message})})})}),e.jsx("td",{className:"py-4 text-center",children:t.status}),e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"flex justify-center gap-2",children:e.jsx(u,{content:"View Booked Services",trigger:e.jsx(R,{className:"cursor-pointer rounded-md border p-1 bg-slate-400 hover:bg-slate-600 transition-all fade-in-100 text-black hover:text-white",size:"25",onClick:()=>x(t)})})})})]},t.id))})]}),e.jsx(I,{isOpen:l,setISOpen:c,hasTrigger:!1,title:"Booking Details",customWidth:"20vw",contentNode:e.jsx(h,{})})]})},_=()=>{const{filteredList:r,setSearchTerm:l,searchTerm:c}=A();return e.jsxs(g,{fixed:!0,children:[e.jsx(g.Header,{children:e.jsxs("div",{className:"flex w-full items-center justify-end space-x-4",children:[e.jsx(T,{}),e.jsx(B,{})]})}),e.jsxs(g.Body,{className:"flex flex-col",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Booking List"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage all your bookings at one place."})]}),e.jsx("div",{className:"my-4 flex items-end justify-between sm:my-0 sm:items-center",children:e.jsx("div",{className:"w-full flex flex-col gap-4 sm:my-4 sm:flex-row",children:e.jsx(D,{placeholder:"Filter services...",className:"h-9 w-full sm:w-40 sm:w-[250px]",value:c,onChange:a=>l(a.target.value)})})}),e.jsx(C,{className:"shadow"}),e.jsx(E,{list:r})]})]})};export{_ as default};
