import{j as e,B as w,P as E,C as R,u as k,r as i,t as N,R as G,L}from"./index-UwPLBKTL.js";import{H as A,F as H}from"./footer-BhJ3RGeC.js";import{B,I as F}from"./badge-Q7-FWLEM.js";import{P as M,a as O,b as K,C as V,c as $,d as q,e as U,f as W}from"./popover-BDWcfXoD.js";import{S as _,a as J,b as Q,c as X,d as Y,e as Z}from"./select-icisDKlQ.js";import{c as ee}from"./commonFn-tXP-utln.js";import{I as se}from"./IconListDetails-Dwpoz3Hx.js";import"./index-Ct-hoGTR.js";import"./index-DX9COnwL.js";import"./dialog-D6CxKyat.js";import"./index-Ff1eVdZa.js";import"./index-D1DUscVI.js";import"./index-fByr66rD.js";import"./index-CBA5G030.js";function y({title:m,options:u,optionIDSlug:x,optionNameSlug:r,selectedValues:o,onChange:p,type:g}){return e.jsxs(M,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(w,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),m,o.size>0&&e.jsxs(B,{variant:"secondary",className:"ml-2",children:[o.size," selected"]})]})}),e.jsx(K,{className:"w-[200px] p-0",align:"start",children:e.jsx(V,{children:e.jsxs($,{children:[e.jsx(q,{children:"No results found."}),e.jsx(U,{children:u==null?void 0:u.map(a=>{const s=o.size>0?o==null?void 0:o.has(a[x]):!1;return e.jsxs(W,{onSelect:()=>{p(g,a[x])},children:[e.jsx("div",{className:`mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary ${s?"bg-primary text-primary-foreground":"opacity-50"}`,children:s&&e.jsx(R,{className:"h-4 w-4"})}),e.jsx("span",{children:a[r]})]},a[x])})})]})})})]})}const{handleGMapURL:te,getCalculateDistance:ae}=ee,S=[{value:0,label:"All Centers"},{value:1,label:"1 Kms"},{value:2,label:"2 Kms"},{value:5,label:"5 Kms"},{value:10,label:"10 Kms"},{value:20,label:"20 Kms"},{value:50,label:"50 Kms"}],ne=()=>{const{HandleGetRequest:m}=k(),[u,x]=i.useState(!0),[r,o]=i.useState({}),[p,g]=i.useState([]),[a,s]=i.useState({vehicleType:new Set,category:new Set,service:new Set}),[n,f]=i.useState({lat:0,long:0,radius:S[0].value.toString()});i.useLayoutEffect(()=>{C()},[]),i.useEffect(()=>{var t;if(((t=r.centerList)==null?void 0:t.length)>0){const l=r.centerList.map(c=>{var j,v;const h=ae(n.lat,n.long,((j=c.centerGeoLocation)==null?void 0:j.lat)||0,((v=c.centerGeoLocation)==null?void 0:v.long)||0);return{...c,distance:h}});i.startTransition(()=>{g(l)})}},[r,n]);async function C(){(await navigator.permissions.query({name:"geolocation"})).state==="denied"?(console.log("Location access was denied. Please enable it."),b()):I()}function I(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>T(t),t=>P(t)):console.error("Geolocation is not supported by this browser.")}function T(t){const{latitude:l,longitude:c}=t.coords;i.startTransition(()=>{f(h=>({...h,lat:l,long:c}))})}function P(t){switch(t.code){case t.PERMISSION_DENIED:b();break;case t.TIMEOUT:case t.POSITION_UNAVAILABLE:default:N({title:"Error",description:"Something went wrong, Try later!"});break}}function b(){N({title:"Error",description:"Location access is required. Please enable it in your browser settings."})}i.useEffect(()=>{u&&D(`${G.publicCenterListRoute}/${n.lat}/${n.long}/${n.radius}`)},[u]),i.useEffect(()=>{if(Array.isArray(r.centerList)){let t=r.centerList;(a.vehicleType.size>0||a.category.size>0||a.service.size>0)&&(t=t.filter(l=>{const c=l.services||[],h=a.vehicleType.size===0||c.some(d=>d&&a.vehicleType.has(d.vehicleID)),j=a.category.size===0||c.some(d=>d&&a.category.has(d==null?void 0:d.categoryID)),v=a.service.size===0||c.some(d=>d&&(a.service.has(d.serviceID)||d.addons&&d.addons.some(z=>a.service.has(z.serviceID))));return h&&j&&v})),i.startTransition(()=>{g(t)})}},[r,a]);async function D(t){const l=await m({route:t});(l==null?void 0:l.status)===200&&i.startTransition(()=>{o(l.data)}),x(!1)}return{radiusCircle:S,centerList:r,filteredList:p,selectedValues:a,defaultData:n,handleSelectionChange:(t,l)=>{s(c=>{const h=new Set(c[t]);return h.has(l)?h.delete(l):h.add(l),{...c,[t]:h}})},handleRadiusCircle:t=>{i.startTransition(()=>{x(!0),f(l=>({...l,radius:t}))})},handleGMapURL:te}},le=()=>{const{radiusCircle:m,defaultData:u,centerList:x,filteredList:r,selectedValues:o,handleSelectionChange:p,handleRadiusCircle:g,handleGMapURL:a}=ne();return e.jsx(e.Fragment,{children:e.jsx("section",{className:"relative my-8",children:e.jsxs("div",{className:"container mx-auto flex flex-col px-4 gap-5 sm:gap-14 items-center",children:[e.jsxs("div",{className:"flex gap-2 justify-center flex-wrap w-full sm:justify-end",children:[e.jsx(y,{title:"Vehicle Type",type:"vehicleType",selectedValues:o.vehicleType,options:x.vehicleList,optionIDSlug:"id",optionNameSlug:"name",onChange:(s,n)=>{p(s,n)}}),e.jsx(y,{title:"Category",type:"category",selectedValues:o.category,options:x.categoryList,optionIDSlug:"id",optionNameSlug:"name",onChange:(s,n)=>{p(s,n)}}),e.jsx(y,{title:"Service Type",type:"service",selectedValues:o.service,options:x.serviceList,optionIDSlug:"id",optionNameSlug:"name",onChange:(s,n)=>{p(s,n)}}),u.lat!==0&&u.long!==0&&e.jsxs(_,{value:u.radius,onValueChange:s=>g(s),children:[e.jsx(J,{className:"w-auto",children:e.jsx(Q,{placeholder:"Select Radius"})}),e.jsx(X,{children:e.jsx(Y,{children:m==null?void 0:m.map(s=>e.jsx(Z,{value:s.value.toString(),children:s.label},s.value))})})]})]}),e.jsx("div",{className:"mx-2",children:e.jsx("div",{className:"flex flex-wrap w-[90vw] sm:w-full mx-auto",children:(r==null?void 0:r.length)>0&&r.map(s=>e.jsx("div",{className:"relative w-full md:w-1/2 lg:w-1/3 p-2",children:e.jsxs("div",{className:"rounded-lg border p-4 hover:shadow-md flex flex-col gap-2",children:[e.jsxs("div",{className:"my-2 mt-3 flex items-center gap-2 w-full",children:[e.jsx("div",{className:"flex size-10 items-center justify-center rounded-lg bg-muted p-2 font-bold",children:s==null?void 0:s.centerAbbreviation}),e.jsx("h2",{className:"mb-1 font-semibold text-xl truncate",children:s==null?void 0:s.centerName})]}),e.jsxs("p",{className:"line-clamp-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),"¬†",s==null?void 0:s.centerPhone]}),e.jsxs("p",{className:"line-clamp-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Distance:"}),"¬†",Number(s==null?void 0:s.distance).toFixed(3)," meters"]}),e.jsx("small",{className:"line-clamp-2 text-muted-foreground overflow-hidden text-ellipsis whitespace-normal",style:{minHeight:"calc(2 * 1.2rem)"},children:s==null?void 0:s.centerAddress}),e.jsxs("div",{className:"flex gap-2 justify-between",children:[e.jsx(L,{to:`../center/${s.centerID}`,children:e.jsxs(w,{type:"button",className:"flex gap-2 items-center",children:[e.jsx(se,{size:15}),"View Services"]})}),e.jsxs(w,{type:"button",className:"flex gap-2 items-center",variant:"secondary",onClick:()=>{var n,f;return a(((n=s==null?void 0:s.centerGeoLocation)==null?void 0:n.lat)||0,((f=s==null?void 0:s.centerGeoLocation)==null?void 0:f.long)||0)},children:[e.jsx(F,{size:15}),"View Direction"]})]})]})},s.centerID))})})]})})})},be=()=>e.jsxs(e.Fragment,{children:[e.jsx(A,{activeHeader:"Home"}),e.jsxs("section",{className:"bg-[--deep-purple] py-24 pt-36 relative",children:[e.jsx("div",{className:"container",children:e.jsx("div",{className:"border-0 text-white text-4xl text-center",children:"Book your next Car/Bike Washing Service Online"})}),e.jsx("div",{className:"header absolute bottom-[-2rem] w-full",children:e.jsx("div",{children:e.jsxs("svg",{className:"waves",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 24 150 28",preserveAspectRatio:"none","shape-rendering":"auto",children:[e.jsx("defs",{children:e.jsx("path",{id:"gentle-wave",d:"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"})}),e.jsxs("g",{className:"parallax",children:[e.jsx("use",{xlinkHref:"#gentle-wave",x:"48",y:"0",fill:"rgba(255,255,255,0.7"}),e.jsx("use",{xlinkHref:"#gentle-wave",x:"48",y:"3",fill:"rgba(255,255,255,0.5)"}),e.jsx("use",{xlinkHref:"#gentle-wave",x:"48",y:"5",fill:"rgba(255,255,255,0.3)"}),e.jsx("use",{xlinkHref:"#gentle-wave",x:"48",y:"7",fill:"#fff"})]})]})})})]}),e.jsx(le,{}),e.jsx("section",{className:"bg-[--deep-purple] p-3 sm:p-16",children:e.jsx("div",{className:"sm:container mx-auto sm:px-28",children:e.jsx("div",{className:"flex flex-wrap justify-center bg-white shadow-xl rounded-lg py-16 px-12 relative z-10",children:e.jsxs("div",{className:"w-full text-center lg:w-8/12",children:[e.jsx("p",{className:"text-4xl text-center",children:e.jsx("span",{role:"img","aria-label":"love",children:"üòç"})}),e.jsx("h3",{className:"font-semibold text-3xl",children:"Join Our Platform Today!"}),e.jsx("p",{className:" text-lg mt-4 mb-4",children:"Ready to take your washing center to the next level? Sign up now and become part of our growing community of successful washing centers. Together, we can redefine the washing experience for your customers!"}),e.jsx(L,{to:"../auth/sign-up",children:e.jsx(w,{type:"button",size:"lg",children:"Start Your Washing Center"})})]})})})}),e.jsx(H,{})]});export{be as default};
