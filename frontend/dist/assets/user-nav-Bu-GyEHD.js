import{i as M,r as l,j as e,l as u,N as b,p as v,e as m,g as I,u as E,d as _,B as k,R as F}from"./index-DkidKY7D.js";import{D as P,a as T,b as U,c as q,d as B,e as D,f as $}from"./dropdown-menu-CKjr6Fii.js";import{c as G}from"./commonFn-D_Qiadkl.js";var f="Avatar",[O,W]=M(f),[H,p]=O(f),x=l.forwardRef((t,s)=>{const{__scopeAvatar:r,...a}=t,[o,n]=l.useState("idle");return e.jsx(H,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:n,children:e.jsx(u.span,{...a,ref:s})})});x.displayName=f;var h="AvatarImage",w=l.forwardRef((t,s)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:o=()=>{},...n}=t,d=p(h,r),i=K(a,n.referrerPolicy),c=b(g=>{o(g),d.onImageLoadingStatusChange(g)});return v(()=>{i!=="idle"&&c(i)},[i,c]),i==="loaded"?e.jsx(u.img,{...n,ref:s,src:a}):null});w.displayName=h;var N="AvatarFallback",A=l.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:a,...o}=t,n=p(N,r),[d,i]=l.useState(a===void 0);return l.useEffect(()=>{if(a!==void 0){const c=window.setTimeout(()=>i(!0),a);return()=>window.clearTimeout(c)}},[a]),d&&n.imageLoadingStatus!=="loaded"?e.jsx(u.span,{...o,ref:s}):null});A.displayName=N;function K(t,s){const[r,a]=l.useState("idle");return v(()=>{if(!t){a("error");return}let o=!0;const n=new window.Image,d=i=>()=>{o&&a(i)};return a("loading"),n.onload=d("loaded"),n.onerror=d("error"),n.src=t,s&&(n.referrerPolicy=s),()=>{o=!1}},[t,s]),r}var j=x,S=w,L=A;const R=l.forwardRef(({className:t,...s},r)=>e.jsx(j,{ref:r,className:m("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));R.displayName=j.displayName;const y=l.forwardRef(({className:t,...s},r)=>e.jsx(S,{ref:r,className:m("aspect-square h-full w-full",t),...s}));y.displayName=S.displayName;const C=l.forwardRef(({className:t,...s},r)=>e.jsx(L,{ref:r,className:m("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));C.displayName=L.displayName;const{getNameAbbreviation:Q}=G;function X(){const t=I(),{HandleGetRequest:s}=E(),{handleLoggedOut:r,userData:a}=_();async function o(){const n=await s({route:F.getLogoutRoute});(n==null?void 0:n.status)===200&&(r(),t("../"))}return e.jsxs(P,{children:[e.jsx(T,{asChild:!0,children:e.jsx(k,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:e.jsxs(R,{className:"h-8 w-8",children:[e.jsx(y,{src:"/avatars/01.png",alt:"@washing-center"}),e.jsx(C,{children:Q((a==null?void 0:a.userName)??"User")})]})})}),e.jsxs(U,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(q,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:a==null?void 0:a.userName}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:a==null?void 0:a.userEmail})]})}),e.jsx(B,{}),e.jsxs(D,{onClick:o,className:"cursor-pointer",children:["Log out",e.jsx($,{children:"⇧⌘Q"})]})]})]})}export{R as A,X as U,y as a,C as b};
