import{b as k,a as T,c as C,r as s,R as p,j as e,B as f}from"./index-Dk9JA_Lc.js";import{T as P,U as S}from"./user-nav-C4L7P9--.js";import{I as L}from"./input-DrkxjiK5.js";import{S as U}from"./separator-Uw-iM8ec.js";import{L as h}from"./dropdown-menu-Ca9jKMhm.js";import{C as E,I as R,a as D}from"./customTooltip-BtlVFdwm.js";import"./tooltip-D0e4-o6p.js";const I=()=>{const l=k(),{isLoggedIn:c}=T(),{HandleGetRequest:n,HandlePostRequest:d}=C(),[i,o]=s.useState(!0),[t,m]=s.useState(""),[g,u]=s.useState(!1),[x,j]=s.useState([]),[b,y]=s.useState([]);s.useLayoutEffect(()=>{c||l("../auth/sign-in")},[c]),s.useEffect(()=>{i&&N(p.commonUserRoute)},[i]),s.useEffect(()=>{let r=x;(x==null?void 0:x.length)>0&&t!==""&&(r=r.filter(a=>a.partnerName.toLowerCase().includes(t.toLowerCase())||a.partnerEmail.toLowerCase().includes(t.toLowerCase()))),s.startTransition(()=>y(r))},[t,x]);async function N(r){const a=await n({route:r});(a==null?void 0:a.status)===200&&s.startTransition(()=>{o(!1),j(a.data)})}function w(){s.startTransition(()=>{o(!1),u(!1)})}async function v(r){const a=await d({data:{userID:r},route:`${p.commonUserRoute}/${r}`,type:"delete",toastDescription:"User has deleted successfully"});(a==null?void 0:a.status)===200&&w()}return{filteredList:b,searchTerm:t,modalToggle:g,setModalToggle:u,setSearchTerm:m,handleUserDeletion:v}},A=({list:l,toggle:c,setToggle:n,handleDeletion:d})=>{const[i,o]=s.useState({});return e.jsxs("div",{className:"overflow-x-auto overscroll-y-none",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 rounded-s py-3 text-left font-bold text-xs text-white bg-black uppercase tracking-wider md:px-6",children:"S.No."}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Partner Name"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Partner Phone"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Partner Email"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Total Centers"})}),e.jsx("th",{className:"px-2 rounded-e py-3 text-left font-bold text-xs text-white bg-black uppercase tracking-wider md:px-6",children:"Interact"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l==null?void 0:l.map((t,m)=>e.jsxs("tr",{className:"bg-gray-50 text-gray-900 hover:bg-gray-100",children:[e.jsx("td",{className:"py-4 text-center relative",children:m+1}),e.jsx("td",{className:"py-4 text-center",children:t.partnerName}),e.jsx("td",{className:"py-4 text-center",children:t.partnerEmail}),e.jsx("td",{className:"py-4 text-center",children:t.partnerPhone}),e.jsx("td",{className:"py-4 text-center",children:t.totalCenters}),e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"flex justify-center gap-2",children:e.jsx(E,{content:"Delete Partner",trigger:e.jsx(R,{className:"cursor-pointer rounded-md border p-1 bg-slate-400 hover:bg-slate-600 transition-all fade-in-100 text-black hover:text-white",size:"25",onClick:()=>{s.startTransition(()=>{o(t),n(!0)})}})})})})]},t.id))})]}),e.jsx(D,{isOpen:c,setISOpen:n,hasTrigger:!1,title:"Confirm Your Action",customWidth:"20vw",contentNode:e.jsxs("div",{children:[e.jsxs("div",{children:["Are you sure you want to delete ",i.partnerName," ?"]}),e.jsx("small",{children:"All their centers and booking will also be deleted!"}),e.jsxs("div",{className:"flex justify-end gap-2 my-2",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Close"}),e.jsx(f,{type:"button",onClick:()=>d(i.id),children:"Delete Partner"})]})]})})]})};function $(){const{filteredList:l,searchTerm:c,modalToggle:n,setModalToggle:d,setSearchTerm:i,handleUserDeletion:o}=I();return e.jsxs(h,{fixed:!0,children:[e.jsx(h.Header,{children:e.jsxs("div",{className:"flex w-full items-center justify-end space-x-4",children:[e.jsx(P,{}),e.jsx(S,{})]})}),e.jsxs(h.Body,{className:"flex flex-col",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Partner Panel"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage all your center partners at one place."})]}),e.jsx("div",{className:"my-4 flex items-end justify-between sm:my-0 sm:items-center",children:e.jsx("div",{className:"flex gap-4 sm:my-4",children:e.jsx(L,{placeholder:"Filter partner by name...",className:"h-9 w-40 lg:w-[250px]",value:c,onChange:t=>i(t.target.value)})})}),e.jsx(U,{className:"shadow"}),e.jsx(A,{list:l,toggle:n,setToggle:d,handleDeletion:t=>o(t)})]})]})}export{$ as default};
