import{b as S,a as T,c as C,r as t,R as y,j as e,d as k,B as j}from"./index-Dk9JA_Lc.js";import{a as E,C as V,I as R}from"./customTooltip-BtlVFdwm.js";import{T as D,U as q}from"./user-nav-C4L7P9--.js";import{I as F}from"./input-DrkxjiK5.js";import{S as A}from"./separator-Uw-iM8ec.js";import{L as N}from"./dropdown-menu-Ca9jKMhm.js";import{u as I,z as v,t as H}from"./index-yN_4ul2K.js";import{I as P}from"./IconEdit-knyZf_aR.js";import"./tooltip-D0e4-o6p.js";const U=()=>{const a=S(),{isLoggedIn:c}=T(),{HandleGetRequest:m,HandlePostRequest:n}=C(),[i,f]=t.useState(!0),[h,r]=t.useState(""),[g,d]=t.useState(!1),[s,l]=t.useState([]),[o,u]=t.useState([]);t.useLayoutEffect(()=>{c||a("../auth/sign-in")},[c]),t.useEffect(()=>{i&&b(y.commonVehicleRoute)},[i]),t.useEffect(()=>{let p=s;(s==null?void 0:s.length)>0&&h!==""&&(p=p.filter(x=>x.name.toLowerCase().includes(h.toLowerCase()))),t.startTransition(()=>u(p))},[h,s]);async function b(p){const x=await m({route:p});(x==null?void 0:x.status)===200&&t.startTransition(()=>{f(!1),l(x.data)})}function w(){t.startTransition(()=>{f(!0),d(!1)})}async function L(p){const x=await n({data:{vehicleID:p},route:`${y.commonVehicleRoute}/${p}`,type:"delete",toastDescription:"Vehicle has deleted successfully"});(x==null?void 0:x.status)===200&&w()}return{filteredList:o,searchTerm:h,modalToggle:g,setModalToggle:d,setSearchTerm:r,handleVehicleDeletion:L,handleConfirmation:w}},$=(a="")=>{const c=S(),{isLoggedIn:m}=T(),{HandleGetRequest:n,HandlePostRequest:i}=C(),[f,h]=t.useState(!0),[r,g]=t.useState({id:a??"",name:""});t.useLayoutEffect(()=>{m||c("../auth/sign-in")},[m]),t.useEffect(()=>{f&&a!==""&&d(`${y.commonVehicleRoute}/${a}`)},[f,a]);async function d(l){const o=await n({route:l});(o==null?void 0:o.status)===200&&t.startTransition(()=>{h(!1),g(u=>({...u,...o.data}))})}async function s(l,o){const u=await i({data:l,route:y.commonVehicleRoute,type:a===""?"post":"put",toastDescription:`Vehicle has ${a===""?"created":"updated"} successfully!`});(u==null?void 0:u.status)===200&&o()}return{defaultValues:r,handleFormSubmission:s}},G=v.object({id:v.string().optional(),name:v.string().min(2,{message:"Vehicle Name should have at least 2 characters"})});function z({className:a,formID:c,handleConfirmation:m,...n}){const{defaultValues:i,handleFormSubmission:f}=$(c),{register:h,handleSubmit:r,reset:g,formState:{errors:d,isValid:s,isDirty:l,isSubmitting:o}}=I({resolver:H(G),defaultValues:i,mode:"onChange"});t.useEffect(()=>{i&&g(i)},[i,g]);async function u(b){f(b,m)}return e.jsx("div",{className:k("grid gap-6",a),...n,children:e.jsxs("form",{onSubmit:r(u),className:"p-6 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mt-1 py-2 rounded-md w-full",children:"Vehicle Name"}),e.jsx("input",{type:"text",...h("name"),placeholder:"(i.e. 150)",className:"mt-1 p-2 border border-gray-300 rounded-md focus:border-transparent focus:ring-2 focus:ring-black focus:outline-none w-full"}),d.name&&e.jsx("p",{className:"text-red-600 text-sm",children:d.name.message})]}),e.jsx(j,{className:"mt-2 w-full",type:"submit",disabled:!l||!s||o,children:c===""?"Create New Service":"Update Service Details"})]})})}function _(){const{filteredList:a,modalToggle:c,searchTerm:m,setSearchTerm:n,setModalToggle:i,handleVehicleDeletion:f,handleConfirmation:h}=U(),[r,g]=t.useState({id:"",name:"",type:"",title:""});function d(s,l,o,u){t.startTransition(()=>{i(!c),g({id:s,name:l,type:u,title:o})})}return e.jsxs(N,{fixed:!0,children:[e.jsx(N.Header,{children:e.jsxs("div",{className:"flex w-full items-center justify-end space-x-4",children:[e.jsx(D,{}),e.jsx(q,{})]})}),e.jsxs(N.Body,{className:"flex flex-col",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Vehicle List Panel"}),e.jsx("p",{className:"text-muted-foreground",children:"View and create all your vehicle at one place."})]}),e.jsxs("div",{className:"my-4 flex items-end justify-between sm:items-center",children:[e.jsx(F,{placeholder:"Filter vehicle by name...",className:"h-9 w-40 lg:w-[250px]",value:m,onChange:s=>n(s.target.value)}),e.jsx(j,{type:"button",onClick:()=>d("","","Add New Vehicle","Add"),children:"Add New Vehicle"})]}),e.jsx(A,{className:"shadow"}),e.jsx(B,{list:a,handleDelete:(s,l)=>d(s,l,"Delete Vehicle","Delete"),handleEdit:(s,l)=>d(s,l,"Edit Vehicle","Edit")}),e.jsx(E,{isOpen:c,setISOpen:i,hasTrigger:!1,customWidth:"20vw",title:r.title,contentNode:e.jsx("div",{children:r.type==="Delete"?e.jsxs("div",{children:[e.jsxs("div",{children:["Are you sure you want to ",r.type," ",r.name," ?"]}),e.jsxs("div",{className:"flex justify-end gap-2 sm:mt-5 sm:me-5 my-2",children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Close"}),e.jsx(j,{type:"button",onClick:()=>f(r.id),children:"Delete Vehicle"})]})]}):e.jsx(z,{formID:r.id,handleConfirmation:h})})})]})]})}const B=({list:a,handleEdit:c,handleDelete:m})=>e.jsx("div",{className:"overflow-x-auto overscroll-y-none",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 rounded-s py-3 font-bold text-xs text-white bg-black uppercase tracking-wider md:px-6 text-center",children:"S.No."}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Vehicle Name"})}),e.jsx("th",{className:"px-2 rounded-e py-3 font-bold text-xs text-white text-center bg-black uppercase tracking-wider md:px-6",children:"Interact"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a==null?void 0:a.map((n,i)=>e.jsxs("tr",{className:"bg-gray-50 text-gray-900 hover:bg-gray-100",children:[e.jsx("td",{className:"py-3 text-center relative",children:i+1}),e.jsx("td",{className:"py-3",children:n.name}),e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(V,{content:"Edit Vehicle",trigger:e.jsx(P,{className:"cursor-pointer rounded-md border p-1 bg-slate-400 hover:bg-slate-600 transition-all fade-in-100 text-black hover:text-white",size:"25",onClick:()=>c(n.id,n.name)})}),e.jsx(V,{content:"Delete Vehicle",trigger:e.jsx(R,{className:"cursor-pointer rounded-md border p-1 bg-slate-400 hover:bg-slate-600 transition-all fade-in-100 text-black hover:text-white",size:"25",onClick:()=>m(n.id,n.name)})})]})})]},n.id))})]})});export{_ as default};
