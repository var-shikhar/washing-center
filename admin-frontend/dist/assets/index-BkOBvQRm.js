import{f as D,b as O,a as B,c as E,r as l,R as L,j as e,B as p}from"./index-Dk9JA_Lc.js";import{T as U,U as $}from"./user-nav-C4L7P9--.js";import{I as P}from"./input-DrkxjiK5.js";import{S as H}from"./separator-Uw-iM8ec.js";import{L as A}from"./dropdown-menu-Ca9jKMhm.js";import{C as N,I as J,a as q}from"./customTooltip-BtlVFdwm.js";import"./tooltip-D0e4-o6p.js";/**
 * @license @tabler/icons-react v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var z=D("outline","playlist-x","IconPlaylistX",[["path",{d:"M19 8h-14",key:"svg-0"}],["path",{d:"M5 12h7",key:"svg-1"}],["path",{d:"M12 16h-7",key:"svg-2"}],["path",{d:"M16 14l4 4",key:"svg-3"}],["path",{d:"M20 14l-4 4",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.19.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F=D("outline","status-change","IconStatusChange",[["path",{d:"M6 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M18 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M6 12v-2a6 6 0 1 1 12 0v2",key:"svg-2"}],["path",{d:"M15 9l3 3l3 -3",key:"svg-3"}]]);const G=()=>{const o=O(),{isLoggedIn:m}=B(),{HandleGetRequest:x,HandlePostRequest:r}=E(),[u,h]=l.useState(!0),[g,d]=l.useState(!1),[c,i]=l.useState(""),[t,v]=l.useState({}),[w,k]=l.useState({});l.useLayoutEffect(()=>{m||o("../auth/sign-in")},[m]),l.useEffect(()=>{u&&S(L.commonCenterRoute)},[u]),l.useEffect(()=>{var T,I;const n={listedList:t.centerList,unListedList:t.unListedCenterList};((T=t.centerList)==null?void 0:T.length)>0&&c!==""&&(n.listedList=a(n.listedList)),((I=t.unListedCenterList)==null?void 0:I.length)>0&&c!==""&&(n.unListedList=a(n.unListedList));function a(R){return R.filter(C=>C.ownerName.toLowerCase().includes(c.toLowerCase())||C.centerName.toLowerCase().includes(c.toLowerCase())||C.centerEmail&&C.centerEmail.toLowerCase().includes(c.toLowerCase()))}l.startTransition(()=>{k({centerList:n.listedList,unListedCenterList:n.unListedList})})},[c,t]);async function S(n){const a=await x({route:n});(a==null?void 0:a.status)===200&&l.startTransition(()=>{h(!1),v(a.data)})}function s(){l.startTransition(()=>{d(!1),h(!0)})}async function f(n){const a=await r({data:{centerID:n},route:`${L.commonCenterRoute}/${n}`,type:"delete",toastDescription:"Center has deleted successfully"});(a==null?void 0:a.status)===200&&s()}async function b(n){const a=await r({data:{centerID:n},route:`${L.commonCenterRoute}/${n}`,type:"put",toastDescription:"Center Status has updated successfully"});(a==null?void 0:a.status)===200&&s()}async function y(n){const a=await r({data:{centerID:n},route:`${L.commonCenterRoute}/${n}`,type:"post",toastDescription:"Listing has updated successfully"});(a==null?void 0:a.status)===200&&s()}return{modalToggle:g,setModalToggle:d,searchTerm:c,setSearchTerm:i,filteredOBJ:w,handleCenterDeletion:f,handleCenterActiveStatus:b,handleCenterListingStatus:y}},M=({list:o,type:m,toggle:x,setToggle:r,handleCenterLiveMode:u,handleCenterStatus:h,handleDeletion:g})=>{const[d,c]=l.useState("Status"),[i,t]=l.useState({});function v(s,f){l.startTransition(()=>{t(s),c(f),r(!x)})}const w=()=>e.jsxs("div",{children:[e.jsxs("div",{children:["Are you sure you want to ",i.isActive?"InActivate":"Activate"," ",i.centerName," ?"]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3 mx-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Close"}),e.jsxs(p,{type:"button",onClick:()=>h(i.centerID),children:[i.isActive?"InActivate":"Activate"," Center"]})]})]}),k=()=>e.jsxs("div",{children:[e.jsxs("div",{children:["Are you sure you want to ",i.isLive?"Unlist":"list"," ",i.centerName," ?"]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3 mx-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Close"}),e.jsxs(p,{type:"button",onClick:()=>u(i.centerID),children:[i.isLive?"UnList":"List"," Center"]})]})]}),S=()=>e.jsxs("div",{children:[e.jsxs("div",{children:["Are you sure you want to delete ",e.jsx("b",{children:i.centerName})," center ?"]}),e.jsx("small",{children:"All their booking will also be deleted!"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3 mx-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Close"}),e.jsx(p,{type:"button",onClick:()=>g(i.centerID),children:"Delete Center"})]})]});return e.jsxs("div",{className:"overflow-x-auto overscroll-y-none",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 rounded-s py-3 text-left font-bold text-xs text-white bg-black uppercase tracking-wider md:px-6",children:"S.No."}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Owner Name"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Center Name"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Center Email & Phone"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Center Address"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Opening/Closing Timing"})}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left bg-black font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Status"})}),e.jsx("th",{className:"px-2 rounded-e py-3 text-left font-bold text-xs text-white bg-black uppercase tracking-wider md:px-6",children:"Interact"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o==null?void 0:o.map((s,f)=>{var b,y;return e.jsxs("tr",{className:"bg-gray-50 text-gray-900 hover:bg-gray-100",children:[e.jsxs("td",{className:"text-center relative",children:[!s.isActive&&e.jsx("div",{className:"absolute top-0 left-0 rounded-r-sm px-3 text-sm font-semibold bg-red-300 text-red-600",children:"In-Active"}),!s.isLive&&e.jsx("div",{className:"absolute top-0 left-0 rounded-r-sm px-3 text-sm font-semibold bg-red-300 text-red-600",children:"Un-Listed"}),f+1]}),e.jsx("td",{className:"text-center",children:s.ownerName}),e.jsx("td",{className:"text-center",children:s.centerName}),e.jsxs("td",{className:"flex flex-col gap-2 items-center justify-center",children:[e.jsx("div",{children:s.centerEmail}),e.jsx("small",{children:s.centerPhone})]}),e.jsx("td",{className:"",children:e.jsx("div",{className:"text-center w-28 truncate",children:e.jsx(N,{content:s.centerAddress,trigger:e.jsx("div",{className:"w-[100%] truncate",children:s.centerAddress})})})}),e.jsxs("td",{className:" text-center",children:[(b=s.centerTiming)==null?void 0:b.stTime,"/",(y=s.centerTiming)==null?void 0:y.edTime]}),e.jsx("td",{className:" text-center",children:s.isActive?"Active":"In-Active"}),e.jsx("td",{className:"",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[m==="live"&&e.jsx(N,{content:s.isActive?"In-Activate Center":"Activate Center",trigger:e.jsx(F,{className:"cursor-pointer rounded-md border p-1 bg-slate-400 hover:bg-slate-600 transition-all fade-in-100 text-black hover:text-white",size:"25",onClick:()=>v(s,"Status")})}),e.jsx(N,{content:s.isLive?"Unlisted Center":"List Center",trigger:e.jsx(z,{className:"cursor-pointer rounded-md border p-1 bg-slate-400 hover:bg-slate-600 transition-all fade-in-100 text-black hover:text-white",size:"25",onClick:()=>v(s,"Live")})}),e.jsx(N,{content:"Delete Booking",trigger:e.jsx(J,{className:"cursor-pointer rounded-md border p-1 bg-slate-400 hover:bg-slate-600 transition-all fade-in-100 text-black hover:text-white",size:"25",onClick:()=>v(s,"Delete")})})]})})]},s.centerID)})})]}),e.jsx(q,{isOpen:x,setISOpen:r,hasTrigger:!1,title:d==="Status"?`${i.isActive?"InActivate":"Activate"} Center`:d==="Live"?`${i.isLive?"Unlist":"List"} Center`:"Delete Center",customWidth:"20vw",contentNode:e.jsx(e.Fragment,{children:d==="Status"?e.jsx(w,{}):d==="Live"?e.jsx(k,{}):e.jsx(S,{})})})]})},j=[{slug:"pending",label:"Pending Centers"},{slug:"live",label:"Live Centers"}];function ee(){const{filteredOBJ:o,searchTerm:m,modalToggle:x,setSearchTerm:r,setModalToggle:u,handleCenterActiveStatus:h,handleCenterListingStatus:g,handleCenterDeletion:d}=G(),[c,i]=l.useState(j[0].slug);return e.jsxs(A,{fixed:!0,children:[e.jsx(A.Header,{children:e.jsxs("div",{className:"flex w-full items-center justify-end space-x-4",children:[e.jsx(U,{}),e.jsx($,{})]})}),e.jsxs(A.Body,{className:"flex flex-col",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Center List"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage all your centers at one place."})]}),e.jsx("div",{className:"my-4 flex items-end justify-between sm:my-0 sm:items-center",children:e.jsx(P,{placeholder:"Filter services...",className:"h-9 w-40 lg:w-[250px]",value:m,onChange:t=>r(t.target.value)})}),e.jsx("div",{className:"flex gap-2 items-center my-1 sm:my-3 justify-center sm:justify-start",children:j==null?void 0:j.map(t=>e.jsx("div",{onClick:()=>{i(t.slug),r("")},className:`cursor-pointer p-2 font-semibold rounded transition ${c===t.slug?"bg-[--greenish-blue] text-slate-200":"border border-[--greenish-blue] text-[--greenish-blue]"}`,children:t.label},t.slug))}),e.jsx(H,{className:"shadow"}),c===j[0].slug?e.jsx(M,{list:o.unListedCenterList,type:"pending",toggle:x,setToggle:u,handleCenterStatus:t=>h(t),handleCenterLiveMode:t=>g(t),handleDeletion:t=>d(t)}):e.jsx(M,{list:o.centerList,type:"live",toggle:x,setToggle:u,handleCenterStatus:t=>h(t),handleCenterLiveMode:t=>g(t),handleDeletion:t=>d(t)})]})]})}export{ee as default};
