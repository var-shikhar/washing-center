import{c as b,r,b as w,j as s,d as v,B as y,R as N,e as F,a as R}from"./index-Dk9JA_Lc.js";import{C as k}from"./card-DVMURCxI.js";import{P as x}from"./password-input-_SKx17k9.js";import{F as L,a as f,b as h,c as p,d as g,e as j}from"./form-CZLONr-s.js";import{z as l,u as S,t as C}from"./index-yN_4ul2K.js";const E=l.object({isMaster:l.boolean(),password:l.string().min(1,{message:"Please enter your password"}).min(7,{message:"Password must be at least 7 characters long"}),confirmPassword:l.string()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match.",path:["confirmPassword"]});function M({className:e,token:t,...d}){const{HandlePostRequest:o}=b(),[n,m]=r.useState(!1),u=w(),i=S({resolver:C(E),defaultValues:{password:"",confirmPassword:"",isMaster:!0}});async function P(a){m(!0);const c=await o({data:{...a,token:t,isMaster:!0},route:N.commonForgotPasswordRoute,type:"put",toastDescription:"Password has been updated successfully!"});m(!1),(c==null?void 0:c.status)===200?u("../auth/sign-in"):console.error(c)}return s.jsx("div",{className:v("grid gap-6",e),...d,children:s.jsx(L,{...i,children:s.jsx("form",{onSubmit:i.handleSubmit(P),children:s.jsxs("div",{className:"grid gap-2",children:[s.jsx(f,{control:i.control,name:"password",render:({field:a})=>s.jsxs(h,{className:"space-y-1",children:[s.jsx(p,{children:"Password"}),s.jsx(g,{children:s.jsx(x,{placeholder:"********",...a})}),s.jsx(j,{})]})}),s.jsx(f,{control:i.control,name:"confirmPassword",render:({field:a})=>s.jsxs(h,{className:"space-y-1",children:[s.jsx(p,{children:"Confirm Password"}),s.jsx(g,{children:s.jsx(x,{placeholder:"********",...a})}),s.jsx(j,{})]})}),s.jsx(y,{className:"mt-2",type:"submit",loading:n,disabled:n,children:"Update Password"})]})})})})}function H(){const e=F(),{isLoggedIn:t}=R(),d=w(),[o,n]=r.useState(null);if(r.useLayoutEffect(()=>{t&&d("../dashboard")},[t]),r.useEffect(()=>{const u=new URLSearchParams(e.search).get("token");r.startTransition(()=>{n(u)})},[e]),o!==null)return s.jsx(s.Fragment,{children:s.jsx("div",{className:"container grid h-svh flex-col items-center justify-center bg-primary-foreground lg:max-w-none lg:px-0",children:s.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-2 sm:w-[480px] lg:p-8",children:[s.jsxs("div",{className:"mb-4 flex items-center justify-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 h-6 w-6",children:s.jsx("path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"})}),s.jsx("h1",{className:"text-xl font-medium",children:"Washing Center  "})]}),s.jsxs(k,{className:"p-6",children:[s.jsx("div",{className:"mb-2 flex flex-col space-y-2 text-left",children:s.jsx("h1",{className:"text-md font-semibold tracking-tight",children:"Reset Password"})}),s.jsx(M,{token:o})]})]})})})}export{H as default};
