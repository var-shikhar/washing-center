import{b as S,a as T,c as L,r as t,R as j,j as e,d as E,B as p}from"./index-Dk9JA_Lc.js";import{a as R,C as w,I as D}from"./customTooltip-BtlVFdwm.js";import{T as q,U as F}from"./user-nav-C4L7P9--.js";import{I as V}from"./input-DrkxjiK5.js";import{S as A}from"./separator-Uw-iM8ec.js";import{L as C}from"./dropdown-menu-Ca9jKMhm.js";import{u as I,z as N,t as H}from"./index-yN_4ul2K.js";import{I as P}from"./IconEdit-knyZf_aR.js";import"./tooltip-D0e4-o6p.js";const U=()=>{const a=S(),{isLoggedIn:i}=T(),{HandleGetRequest:m,HandlePostRequest:r}=L(),[n,h]=t.useState(!0),[g,l]=t.useState(""),[f,d]=t.useState(!1),[s,o]=t.useState([]),[c,u]=t.useState([]);t.useLayoutEffect(()=>{i||a("../auth/sign-in")},[i]),t.useEffect(()=>{n&&b(j.commonCategoryRoute)},[n]),t.useEffect(()=>{let y=s;(s==null?void 0:s.length)>0&&g!==""&&(y=y.filter(x=>x.name.toLowerCase().includes(g.toLowerCase()))),t.startTransition(()=>u(y))},[g,s]);async function b(y){const x=await m({route:y});(x==null?void 0:x.status)===200&&t.startTransition(()=>{h(!1),o(x.data)})}function v(){t.startTransition(()=>{h(!0),d(!1)})}async function k(y){const x=await r({data:{categoryID:y},route:`${j.commonCategoryRoute}/${y}`,type:"delete",toastDescription:"Category has deleted successfully"});(x==null?void 0:x.status)===200&&v()}return{filteredList:c,searchTerm:g,modalToggle:f,setModalToggle:d,setSearchTerm:l,handleCategoryDeletion:k,handleConfirmation:v}},$=(a="")=>{const i=S(),{isLoggedIn:m}=T(),{HandleGetRequest:r,HandlePostRequest:n}=L(),[h,g]=t.useState(!0),[l,f]=t.useState({id:a??"",name:""});t.useLayoutEffect(()=>{m||i("../auth/sign-in")},[m]),t.useEffect(()=>{h&&a!==""&&d(`${j.commonCategoryRoute}/${a}`)},[h,a]);async function d(o){const c=await r({route:o});(c==null?void 0:c.status)===200&&t.startTransition(()=>{g(!1),f(u=>({...u,...c.data}))})}async function s(o,c){const u=await n({data:o,route:j.commonCategoryRoute,type:a===""?"post":"put",toastDescription:`Category has ${a===""?"created":"updated"} successfully!`});(u==null?void 0:u.status)===200&&c()}return{defaultValues:l,handleFormSubmission:s}},G=N.object({id:N.string().optional(),name:N.string().min(2,{message:"Category Name should have at least 2 characters"})});function z({className:a,formID:i,handleConfirmation:m,...r}){const{defaultValues:n,handleFormSubmission:h}=$(i),{register:g,handleSubmit:l,reset:f,formState:{errors:d,isValid:s,isDirty:o,isSubmitting:c}}=I({resolver:H(G),defaultValues:n,mode:"onChange"});t.useEffect(()=>{n&&f(n)},[n,f]);async function u(b){h(b,m)}return e.jsx("div",{className:E("grid gap-6",a),...r,children:e.jsxs("form",{onSubmit:l(u),className:"p-6 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mt-1 py-2 rounded-md w-full",children:"Category Name"}),e.jsx("input",{type:"text",...g("name"),placeholder:"(i.e. 150)",className:"mt-1 p-2 border border-gray-300 rounded-md focus:border-transparent focus:ring-2 focus:ring-black focus:outline-none w-full"}),d.name&&e.jsx("p",{className:"text-red-600 text-sm",children:d.name.message})]}),e.jsx(p,{className:"mt-2 w-full",type:"submit",disabled:!o||!s||c,children:i===""?"Create New Service":"Update Service Details"})]})})}function _(){const{filteredList:a,modalToggle:i,searchTerm:m,setSearchTerm:r,setModalToggle:n,handleCategoryDeletion:h,handleConfirmation:g}=U(),[l,f]=t.useState({id:"",name:"",type:"",title:""});function d(s,o,c,u){t.startTransition(()=>{n(!i),f({id:s,name:o,type:u,title:c})})}return e.jsxs(C,{fixed:!0,children:[e.jsx(C.Header,{children:e.jsxs("div",{className:"flex w-full items-center justify-end space-x-4",children:[e.jsx(q,{}),e.jsx(F,{})]})}),e.jsxs(C.Body,{className:"flex flex-col",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Category List Panel"}),e.jsx("p",{className:"text-muted-foreground",children:"View and create all your category at one place."})]}),e.jsxs("div",{className:"my-4 flex items-end justify-between sm:items-center",children:[e.jsx(V,{placeholder:"Filter category by name...",className:"h-9 w-40 lg:w-[250px]",value:m,onChange:s=>r(s.target.value)}),e.jsx(p,{type:"button",onClick:()=>d("","","Add New Category","Add"),children:"Add New Category"})]}),e.jsx(A,{className:"shadow"}),e.jsx(B,{list:a,handleDelete:(s,o)=>d(s,o,"Delete Category","Delete"),handleEdit:(s,o)=>d(s,o,"Edit Category","Edit")}),e.jsx(R,{isOpen:i,setISOpen:n,hasTrigger:!1,customWidth:"20vw",title:l.title,contentNode:e.jsx("div",{children:l.type==="Delete"?e.jsxs("div",{children:[e.jsxs("div",{children:["Are you sure you want to ",l.type," ",l.name," ?"]}),e.jsxs("div",{className:"flex justify-end gap-2 sm:mt-5 sm:me-5 my-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Close"}),e.jsx(p,{type:"button",onClick:()=>h(l.id),children:"Delete Category"})]})]}):e.jsx(z,{formID:l.id,handleConfirmation:g})})})]})]})}const B=({list:a,handleEdit:i,handleDelete:m})=>e.jsx("div",{className:"overflow-x-auto overscroll-y-none",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 rounded-s py-3 font-bold text-xs text-white bg-black uppercase tracking-wider md:px-6 text-center",children:"S.No."}),e.jsx("th",{className:"px-2 py-3 bg-black",children:e.jsx("div",{className:"text-left font-bold text-xs text-white  uppercase tracking-wider w-max",children:"Category Name"})}),e.jsx("th",{className:"px-2 rounded-e py-3 font-bold text-xs text-white text-center bg-black uppercase tracking-wider md:px-6",children:"Interact"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a==null?void 0:a.map((r,n)=>e.jsxs("tr",{className:"bg-gray-50 text-gray-900 hover:bg-gray-100",children:[e.jsx("td",{className:"py-3 text-center relative",children:n+1}),e.jsx("td",{className:"py-3",children:r.name}),e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(w,{content:"Edit Vehicle",trigger:e.jsx(P,{className:"cursor-pointer rounded-md border p-1 bg-slate-400 hover:bg-slate-600 transition-all fade-in-100 text-black hover:text-white",size:"25",onClick:()=>i(r.id,r.name)})}),e.jsx(w,{content:"Delete Vehicle",trigger:e.jsx(D,{className:"cursor-pointer rounded-md border p-1 bg-slate-400 hover:bg-slate-600 transition-all fade-in-100 text-black hover:text-white",size:"25",onClick:()=>m(r.id,r.name)})})]})})]},r.id))})]})});export{_ as default};
